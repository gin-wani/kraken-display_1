<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>NZXT Web Integration Monitor</title>
    <style>
      /* --- Kraken上でも見えるように大きめのフォント設定 --- */
      body {
        font-family: Arial, sans-serif;
        color: white;
        background: black;
        text-align: center;
        margin-top: 20px;
      }
      .value {
        font-size: 36px;
        font-weight: bold;
      }
      .label {
        font-size: 24px;
        margin-top: 20px;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div class="label">CPU 温度</div>
    <div id="CpuTemp" class="value">-- °C</div>
    <div class="label">CPU 使用率</div>
    <div id="CpuLoad" class="value">-- %</div>

    <div class="label">GPU 温度</div>
    <div id="GpuTemp" class="value">-- °C</div>
    <div class="label">GPU 使用率</div>
    <div id="GpuLoad" class="value">-- %</div>

    <div class="label">LiquidPumpSpeed</div>
    <div id="PumpSpeed" class="value">-- rpm</div>

    <script>
      /**
       * --------------------------------------------------------
       * Web Integration API を受け取るための必須設定
       * CAM がこの window.nzxt.v1 にデータを送信してくる
       * --------------------------------------------------------
       */

      //import { MonitoringData } from "@nzxt/web-integrations-types/v1";

      window.nzxt = {
        v1: {
          onMonitoringDataUpdate: (data) => {
            const { cpus, gpus, ram, kraken } = data;

            //console.log("受信データ:", data); // デバッグ用（ブラウザで確認可）

            // -------------------------
            // CPU 情報の取得（最初のCPUコアを使用）
            // -------------------------

            //if (data.cpus && data.cpus.length > 0) {
            const cpu = data.cpus[0];
            const gpu = data.gpus[0];

            // CPU温度
            const cputemp = cpu.temperature ?? "--";
            // CPUロード（負荷）
            const cpuload = cpu.load ?? "--";

            // GPU温度
            const gputemp = gpu.temperature ?? "--";
            // GPUロード（負荷）
            const gpuload = gpu.load ?? "--";

            // PompSpeed（rpm）
            const pumpspeed = kraken.pumpSpeed ?? "--";

            // HTML に表示
            document.getElementById("CpuTemp").innerText = Math.round(cputemp) + " °C";
            document.getElementById("CpuLoad").innerText = Math.round(cpuload * 100) + " %";
            //document.getElementById("cpuLoadText").innerText   = `${d.cpuLoad.toFixed(0)} %`;
            //}
            document.getElementById("GpuTemp").innerText = Math.round(gputemp) + " °C";
            document.getElementById("GpuLoad").innerText = Math.round(gpuload * 100) + " %";
            document.getElementById("PumpSpeed").innerText = Math.round(pumpspeed) + " rpm";
          },
        },
      };

      /*
***export interface MonitoringData {
  cpus: Cpu[];
  gpus: Gpu[];
  ram: Ram;
  kraken: Kraken;
}

***export interface Cpu {
  name: string;
  manufacturer: string;
  codeName: string;
  socket: string;

  //** Processor load (0..1) 
  load: NumberOrUndefined;

  numCores: NumberOrUndefined;
  numThreads: NumberOrUndefined;

  temperature: Celsius;
  minTemperature: Celsius;
  maxTemperature: Celsius;

  frequency: Megahertz;
  minFrequency: Megahertz;
  maxFrequency: Megahertz;
  stockFrequency: Megahertz;

  fanSpeed: Rpm;
  minFanSpeed: Rpm;
  maxFanSpeed: Rpm;

  //** Thermal Design Power 
  tdp: Watts;

  power: Watts;
}

***export interface Gpu {
  name: string;

  //** GPU load (0..1) 
  load: NumberOrUndefined;

  temperature: Celsius;
  minTemperature: Celsius;
  maxTemperature: Celsius;

  frequency: Megahertz;
  minFrequency: Megahertz;
  maxFrequency: Megahertz;
  stockFrequency: Megahertz;

  fanSpeed: Rpm;
  minFanSpeed: Rpm;
  maxFanSpeed: Rpm;

  power: Watts;
}

export interface Ram {
  totalSize: Mebibytes;
  inUse: Mebibytes;
  modules: RamModule[];
}

export interface RamModule {
  //** RAM kind (e.g. DDR5) 
  kind: string;
  size: Mebibytes;

  //** Manufacturer and model name 
  model: string;

  frequency: Megahertz;
  stockFrequency: Megahertz;
}

export interface Kraken {
  liquidTemperature: Celsius;
}




    */
    </script>
  </body>
</html>
